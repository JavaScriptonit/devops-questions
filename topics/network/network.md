## Вопросы:
1. Сети в Linux. Какие порты сейчас слушаются приложениями? Как проверить?
2. Что такое NAT? В k8s каждый пакет проходит NAT 3-6 раз.
3. Пример использования NAT:

## 1. Сети в Linux. Какие порты сейчас слушаются приложениями? Как проверить?
    1. `netstat -tuln` - позволяет отображать сетевую статистику, включая информацию о сетевых соединениях, прослушиваемых портах и другие сетевые детали
    2. `ss -tuln` - Socket Statistics, отобразит список TCP и UDP портов, которые в данный момент прослушиваются.

## 2. Что такое NAT? В k8s каждый пакет проходит NAT 3-6 раз.

NAT (Network Address Translation) - это процесс замены IP-адресов в заголовках сетевых пакетов при их передаче через маршрутизатор или файрвол. В Kubernetes каждый пакет может пройти через NAT 3-6 раз из-за внутренних переадресаций и преобразований адресов, возникающих при обработке сетевых пакетов внутри кластера.

В Kubernetes (K8s) NAT (Network Address Translation) используется для обеспечения связности и доступности сетевых ресурсов в кластере. NAT в Kubernetes выполняет ряд функций, включая:

1. `Маршрутизацию трафика`: NAT в Kubernetes позволяет маршрутизировать трафик между различными подсетями внутри кластера. Это важно для обеспечения связности между различными компонентами кластера, такими как поды, сервисы, и другие сетевые ресурсы.

2. `Поддержку доступа извне`: NAT также позволяет обеспечить доступ к сетевым ресурсам в кластере из внешних сетей. Это может включать в себя маршрутизацию входящего трафика к сервисам и подам внутри кластера.

3. `Скрытие внутренних IP-адресов`: NAT может использоваться для скрытия внутренних IP-адресов подов и сервисов, что обеспечивает безопасность и конфиденциальность внутренних сетевых ресурсов.

4. `Управление сетевыми ресурсами`: NAT может использоваться для управления сетевыми ресурсами, включая управление доступом и маршрутизацией трафика внутри кластера.

Обычно в Kubernetes NAT может быть реализован с использованием различных инструментов, таких как `iptables`, `ipvs` и другие средства, которые обеспечивают маршрутизацию и перенаправление трафика в сети Kubernetes.

## 3. Пример использования NAT:

Пример использования NAT в Kubernetes (k8s):

В Kubernetes сетевые пакеты могут проходить через NAT при использовании сетевых плагинов, таких как `Calico`, `Flannel` или `Cilium`. Эти плагины могут выполнять NAT для перенаправления трафика между подсетями или для скрытия внутренних IP-адресов подсети от внешнего мира.

Пример использования NAT в Linux:

В Linux NAT может быть использован для перенаправления трафика между сетевыми интерфейсами, скрытия внутренних IP-адресов подсети и преобразования портов для виртуальных хостов. Для работы с NAT в Linux можно использовать утилиту `iptables` для настройки правил NAT, а также программы `ip` и `sysctl` для управления сетевыми параметрами.

Команды, инструменты и объекты для работы с NAT:

В Kubernetes:

Сетевые плагины (например, `Calico`, `Flannel`, `Cilium`) для настройки NAT.
Объекты Kubernetes, такие как Service и Ingress, для управления трафиком и перенаправления.

В Linux:

Утилита `iptables` для настройки правил NAT.
Программы `ip` и `sysctl` для управления сетевыми параметрами.
Файлы конфигурации, такие как `/etc/sysctl.conf` для постоянной настройки параметров NAT.
Для настройки NAT в обоих случаях также могут использоваться специальные контейнеры, которые выполняют функции маршрутизации и преобразования адресов.
