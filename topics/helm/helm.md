## Вопросы:
1. Достаточно ли будет проверить вручную или в пайплайне статус релиза через Хелм?
2. Когда мы проверяем статус релиза и там написано: "Статус - Deployed". О чем нам это говорит?
3. Какие аналоги HELM ты знаешь? (Helm)
4. Что такое HELM? (HELM)
5. Приходилось ли писать чарты с 0 самостоятельно? (HELM)
6. Приходилось ли использовать хуки и для чего они нужны? (HELM)
7. Пример использования Hooks в HELM. (HELM)
8. 


## 1. Достаточно ли будет проверить вручную или в пайплайне статус релиза через Хелм? (helm) (k8s)

Проверка статуса релиза через Helm может быть полезным шагом в процессе развертывания, но она не должна быть единственным способом проверки успешности релиза. Важно учитывать несколько аспектов:

1. **Проверка через Helm**:
   - Проверка статуса релиза через Helm (например, с помощью команды `helm status`) может помочь вам убедиться, что релиз успешно задеплоен и не возникло ошибок в процессе развертывания. Это дает общее представление о состоянии чарта и его ресурсов.

2. **Проверка доступности приложения**:
   - Однако, важно также проверить фактическую доступность и работоспособность вашего приложения после развертывания. Это можно сделать с помощью автоматизированных тестов, мониторинга и проверки состояния приложения (например, через readiness и liveness probes).

3. **Автоматизированные проверки**:
   - Идеальным вариантом будет включение автоматизированных проверок доступности приложения в ваш пайплайн CI/CD. Это позволит быстро выявлять проблемы после развертывания и обеспечить более надежный процесс релиза.

Таким образом, хотя проверка статуса релиза через Helm важна, рекомендуется также включать автоматизированные проверки доступности приложения в ваш процесс развертывания для более полного и надежного анализа успешности релиза.

## 2. Когда мы проверяем статус релиза и там написано: "Статус - Deployed". О чем нам это говорит? (helm) (k8s)

Когда вы проверяете статус релиза через Helm и видите, что он отображает статус "Deployed" (задеплоено), это означает, что релиз успешно задеплоен на ваш кластер Kubernetes. В контексте Helm это означает, что чарт был установлен и все его компоненты (поды, сервисы, конфигурации и т.д.) были успешно созданы и запущены.

Статус "Deployed" говорит о том, что процесс развертывания завершился без ошибок и приложение теперь доступно в вашем кластере Kubernetes. Однако, это не гарантирует, что ваше приложение полностью работоспособно или доступно для пользователей. Для полной уверенности в успешности релиза важно также проверить доступность и работоспособность самого приложения после развертывания.

Таким образом, статус "Deployed" в Helm говорит о том, что процесс развертывания завершился успешно, но для обеспечения полной уверенности в работоспособности приложения рекомендуется проводить дополнительные проверки доступности и функциональности после развертывания.

## 3. Какие аналоги HELM ты знаешь? (Helm)
`/Users/andreyshabunov/PhpstormProjects/skillbox-k8s/helm/7.4/7.4.md` - путь до файла по Helm в k8s

1. ### Kustomize:
    1. Похож на Dockerfile - `kustomization.yaml`
        1. После создания service.yaml + deployment.yaml -> kustomization.yaml кастомизирует их с заданными значениями
    2. Аналог helm
    3. Встроен в kubectl (v1.14+):
        1. kubectl apply -k === применит kustomize-манифесты
        2. kubectl delete -k === удалит их
        3. kubectl kustomize соберёт манифесты и выведет на экран
    4. Не шаблонизирует как helm
2. ### Jsonnet:
    1. `Jsonnet` - это ЯП и инструмент для генерации JSON и других форматов данных. Он позволяет создавать и управлять структурированными данными с помощью более компактного и выразительного синтаксиса.
    2. Основан на JSON
    3. Можно конвертировать в YAML
    4. Используется с ЯП:
        1. C
        2. Python
        3. Go
        4. PHP
        5. Ruby
    5. Jsonnet может предоставить более гибкий и мощный подход к генерации конфигураций, чем Helm

## 4. Что такое HELM? (HELM)

**HELM** - это пакетный менеджер для Kubernetes, который упрощает установку, обновление и управление приложениями в Kubernetes с помощью предварительно созданных пакетов, называемых **чартами (charts)**. 

Вот некоторые ключевые особенности и преимущества использования HELM:

1. **Управление зависимостями**: HELM позволяет управлять зависимостями между различными компонентами приложения, что упрощает установку и обновление сложных приложений.

2. **Шаблоны конфигурации**: HELM использует шаблоны конфигурации, позволяя параметризовать конфигурацию приложения и создавать несколько экземпляров с разными настройками.

3. **Версионирование**: HELM поддерживает версионирование чартов и позволяет легко обновлять приложения до новых версий.

4. **Расширяемость**: HELM позволяет создавать собственные чарты и распространять их через репозитории, что упрощает совместное использование и повторное использование конфигурации.

5. **Удобный интерфейс командной строки**: HELM предоставляет удобный интерфейс командной строки для управления чартами, установки приложений и управления релизами.

Благодаря своей гибкости, удобству использования и возможности повторного использования конфигурации, HELM является популярным инструментом для управления приложениями в Kubernetes.

## 5. Приходилось ли писать чарты с 0 самостоятельно? (HELM)

**Написание чартов с нуля** может быть вызывающим заданием, особенно для новичков в использовании HELM. Вот некоторые сложности и особенности, с которыми можно столкнуться при написании чартов с нуля:

- **Структура чарта**: необходимо понимание структуры чарта, включая файлы `Chart.yaml`, `values.yaml`, `templates/`, `helpers/` и другие.
- **Шаблоны**: создание шаблонов конфигурации для различных ресурсов Kubernetes может потребовать понимания синтаксиса шаблонизации и функций HELM.
- **Зависимости**: управление зависимостями и подключение внешних чартов может быть сложным, особенно при работе с комплексными приложениями.
- **Тестирование**: важно тестировать чарты, чтобы убедиться, что они работают корректно и создают необходимые ресурсы в Kubernetes.

## 6. Приходилось ли использовать хуки и для чего они нужны? (HELM)

**Хуки (Hooks)** в HELM - это механизм, который позволяет выполнять определенные действия на различных этапах жизненного цикла релиза. Хуки могут быть использованы для выполнения дополнительных операций перед или после установки, обновления или удаления релиза. Например:

- **Pre-install и Post-install хуки**: позволяют выполнить действия до или после установки чарта.
- **Pre-upgrade и Post-upgrade хуки**: позволяют выполнить действия перед или после обновления чарта.
- **Pre-delete и Post-delete хуки**: позволяют выполнить действия перед или после удаления чарта.

Хуки могут быть использованы для различных целей, таких как запуск миграций данных, настройка окружения, уведомление других сервисов и т.д.

## 7. Пример использования Hooks в HELM. (HELM)

Пример использования **Pre-install хука** в чарте HELM. У нас есть чарт `myapp`, и мы хотим выполнить определенные действия перед установкой этого чарта.

1. Создадим файл `pre-install-job.yaml`, который будет содержать определение Job для выполнения хука:

```yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: pre-install-job
spec:
  template:
    spec:
      containers:
      - name: pre-install-container
        image: busybox
        command: ['sh', '-c', 'echo "Pre-install hook executed"']
      restartPolicy: Never
  backoffLimit: 4
```

2. Добавим этот файл в директорию `templates/` нашего чарта.

3. В файле `templates/deployment.yaml` (или другом манифесте, который мы хотим изменить перед установкой), добавим аннотацию, чтобы указать HELM использовать наш Pre-install хук:

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp-deployment
  annotations:
    "helm.sh/hook": pre-install
    "helm.sh/hook-weight": "5"
```

4. Теперь установим чарт `myapp` с использованием хука:

```bash
helm install myapp ./myapp
```

При установке чарта `myapp`, HELM выполнит Pre-install хук, который создаст Job с контейнером BusyBox, который просто выводит сообщение "Pre-install hook executed". Этот хук будет выполнен перед установкой ресурсов из чарта.
